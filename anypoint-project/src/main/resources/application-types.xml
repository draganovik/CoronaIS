<?xml version='1.0' encoding='UTF-8'?>
<types:mule xmlns:types="http://www.mulesoft.org/schema/mule/types">
  <types:catalog>
    <types:type name="input_payload_register" format="json">
      <types:shape format="weave" example="examples/input_payload_register_example.json"><![CDATA[%dw 2.0

type input_payload_register = {|
  state_issued_id: String, 
  full_name: String, 
  departure_region_code: String, 
  has_symptoms: Boolean, 
  phone_number: String, 
  citizenship: String
|} {"example": "{\\\"state_issued_id\\\":\\\"0002403258845\\\",\\\"full_name\\\":\\\"Jovan Popov\\\",\\\"departure_region_code\\\":\\\"MNE\\\",\\\"has_symptoms\\\":true,\\\"phone_number\\\":\\\"+381602255485\\\",\\\"citizenship\\\":\\\"SRB\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="output_payload_patient" format="json">
      <types:shape format="weave" example="examples/output_payload_patient_example.json"><![CDATA[%dw 2.0

type output_payload_patient = {|
  state_issued_id: String, 
  start_of_isolation: String, 
  days_of_isolation_left: Number {"typeId": "int"}, 
  full_name: String, 
  departure_region: {|
    region_code: String, 
    region_name: String
  |}, 
  has_symptoms: Boolean, 
  hospital: {|
    id: Number {"typeId": "int"}, 
    max_capacity: Number {"typeId": "int"}, 
    facility_name: String
  |}, 
  phone_number: String, 
  citizenship: String
|} {"example": "{\\\"state_issued_id\\\":\\\"999121234903\\\",\\\"start_of_isolation\\\":\\\"2020-10-10\\\",\\\"days_of_isolation_left\\\":20,\\\"full_name\\\":\\\"Mike Ross\\\",\\\"departure_region\\\":{\\\"region_code\\\":\\\"MNE\\\",\\\"region_name\\\":\\\"Crna Gora\\\"},\\\"has_symptoms\\\":false,\\\"hospital\\\":{\\\"id\\\":1,\\\"max_capacity\\\":420,\\\"facility_name\\\":\\\"Urgentni Korona Centar Novi Sad\\\"},\\\"phone_number\\\":\\\"+381652455888\\\",\\\"citizenship\\\":\\\"SRB\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="input_attributes_patient_id" format="java">
      <types:shape format="raml"><![CDATA[#%RAML 1.0 DataType
type: object
properties:
    uriParams:
      type: object
      properties:
        issued_state_id:
          type: string]]></types:shape>
    </types:type>
    <types:type name="input_attributes_patients" format="java">
      <types:shape format="raml"><![CDATA[#%RAML 1.0 DataType
type: object
properties:
  queryParams:
    type: object
    properties:
      hotspot_departure_region?:
        type: boolean
      departure_region?:
        type: string
      reg_days_elapsed?:
        type: integer
      hospital_id?:
        type: integer]]></types:shape>
    </types:type>
    <types:type name="output_payload_hospital" format="json">
      <types:shape format="weave" example="examples/output_payload_hospital_example.json"><![CDATA[%dw 2.0

type output_payload_hospital = {|
  id: Number {"typeId": "int"}, 
  max_capacity: Number {"typeId": "int"}, 
  facility_name: String
|} {"example": "{\\\"id\\\":1,\\\"max_capacity\\\":420,\\\"facility_name\\\":\\\"Urgentni Korona Centar Novi Sad\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="input_payload_region" format="json">
      <types:shape format="weave" example="examples/input_payload_region_example.json"><![CDATA[%dw 2.0

type input_payload_region = {|
  region_code: String, 
  region_name: String
|} {"example": "{\\\"region_code\\\":\\\"MNE\\\",\\\"region_name\\\":\\\"Crna Gora\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="output_payload_status" format="json">
      <types:shape format="weave" example="examples/output_payload_status.json"><![CDATA[%dw 2.0

type output_payload_status = {| status: String |} {"example": "{\\\"status\\\":\\\"Patient is in self isolation at home for 4 more days\\\"}"}

]]></types:shape>
    </types:type>
  </types:catalog>
  <types:enrichment select="#47ec537e-9f8f-4a54-894b-5687cb781a4e">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="input_payload_register"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#cea1e800-f6ce-4391-81fc-aed4bb252066">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="input_payload_register"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#f6e6e150-9305-45a5-9891-b5f8a77484c5">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#5417ff21-4cc3-4521-9171-c23b769f3a85">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patients"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient[]"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#30179a03-12d6-4cbf-b1ef-af8e3d1bda3d">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patients"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#b0e8a679-e399-4266-91fb-0e010faf4628">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#ccb1f7de-0bf6-4b79-9096-ee2081f3ad5a">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_hospital"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#4cce9803-eccf-4d2e-804f-dc03fe349e9d">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_hospital"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#35d194b0-97ac-4369-a673-449c317fe872">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="input_payload_register"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#0080af85-c0f9-493d-a521-f4cc9daa1826"/>
  <types:enrichment select="#2b0bc6e7-7937-49b0-a4fd-6dbfe24c469f">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#c84a02fe-205d-490a-8d27-1f8271ade58b">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_hospital"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#7368542f-9cab-4a9d-bbee-857adebf0854">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_hospital"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#a8294d8b-2456-4e9e-b75d-679c1d7c2c54">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_hospital"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#c5561a2c-255b-4daf-b391-8f659b5f1a76">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patients"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#e0f5c232-f2e7-4792-97e1-c8b7aa72b854">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#8e447487-b8ca-45b5-bff6-5811600748e6">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_status"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
</types:mule>