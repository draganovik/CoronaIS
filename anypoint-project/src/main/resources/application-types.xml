<?xml version='1.0' encoding='UTF-8'?>
<types:mule xmlns:types="http://www.mulesoft.org/schema/mule/types">
  <types:catalog>
    <types:type name="input_payload_register" format="json">
      <types:shape format="weave" example="examples/input_payload_register_example.json"><![CDATA[%dw 2.0

type input_payload_register = {|
  state_issued_id: String, 
  full_name: String, 
  departure_region_code: String, 
  has_symptoms: Boolean, 
  phone_number: String, 
  citizenship: String
|} {"example": "{\\\"state_issued_id\\\":\\\"0002403258845\\\",\\\"full_name\\\":\\\"Jovan Popov\\\",\\\"departure_region_code\\\":\\\"MNE\\\",\\\"has_symptoms\\\":true,\\\"phone_number\\\":\\\"+381602255485\\\",\\\"citizenship\\\":\\\"SRB\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="output_payload_patient" format="json">
      <types:shape format="weave" example="examples/output_payload_patient_example.json"><![CDATA[%dw 2.0

type output_payload_patient = {|
  full_name: String, 
  days_of_isolation_left: Number {"typeId": "int"}, 
  state_issued_id: String, 
  departure_region_code: String, 
  start_of_isolation: String, 
  departure_region: {|
    region_code: String, 
    region_name: String
  |}, 
  has_symptoms: Boolean, 
  phone_number: String, 
  hospital: {|
    id: Number {"typeId": "int"}, 
    max_capacity: Number {"typeId": "int"}, 
    facility_name: String
  |}, 
  citizenship: String
|} {"example": "{\\\"full_name\\\":\\\"Jovan Popov\\\",\\\"days_of_isolation_left\\\":20,\\\"state_issued_id\\\":\\\"0002403258845\\\",\\\"departure_region_code\\\":\\\"MNE\\\",\\\"start_of_isolation\\\":\\\"2020-10-10\\\",\\\"departure_region\\\":{\\\"region_code\\\":\\\"MNE\\\",\\\"region_name\\\":\\\"Crna Gora\\\"},\\\"has_symptoms\\\":true,\\\"phone_number\\\":\\\"+381602255485\\\",\\\"hospital\\\":{\\\"id\\\":1,\\\"max_capacity\\\":420,\\\"facility_name\\\":\\\"Urgentni Korona Centar Novi Sad\\\"},\\\"citizenship\\\":\\\"SRB\\\"}"}

]]></types:shape>
    </types:type>
    <types:type name="input_attributes_patient_id" format="java">
      <types:shape format="raml"><![CDATA[#%RAML 1.0 DataType
type: object
properties:
    uriParams:
      type: object
      properties:
        issued_state_id:
          type: string]]></types:shape>
    </types:type>
    <types:type name="input_attributes_patients" format="java">
      <types:shape format="raml"><![CDATA[#%RAML 1.0 DataType
type: object
properties:
  queryParameters:
    type: object
    properties:
      departure_region?:
        type: string
      reg_days_elapsed?:
        type: integer
      hospital_id?:
        type: integer]]></types:shape>
    </types:type>
  </types:catalog>
  <types:enrichment select="#47ec537e-9f8f-4a54-894b-5687cb781a4e">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="input_payload_register"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#cea1e800-f6ce-4391-81fc-aed4bb252066">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="input_payload_register"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#f6e6e150-9305-45a5-9891-b5f8a77484c5">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#5417ff21-4cc3-4521-9171-c23b769f3a85">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patients"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient[]"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#30179a03-12d6-4cbf-b1ef-af8e3d1bda3d">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patients"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#b0e8a679-e399-4266-91fb-0e010faf4628">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="output_payload_patient[]"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#e310b1c0-a04c-470b-a03d-b6145047a997">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="input_attributes_patient_id"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
</types:mule>